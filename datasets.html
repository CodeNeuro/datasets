<head>
  <meta charset="utf-8">
  <title>datasets</title>
  <link rel="icon" sizes="16x16 32x32" href="/favicon.ico?v=2">
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<body>
  
  <!-- Top menu -->
  <div class="container site-header">
    <div class="row">
      <div class="column-6">
        <h1 class="title">DataSets</h1>
      </div>
      <div class="prefix-2 column-3 suffix-1">
        <img style="margin-top: 18px; width: 350px; max-width: 350px" src="svg/logo.svg">
      </div>
    </div>
  </div>

  <!-- Main view -->
  <div class="row main">

    <!-- Side bar -->
    <div class="column-3">
      <div class="about">
        <div class="row">
            <p>Cloud-based access to large neural data sets</p>
            <i class="fa fa-database fa-2x"></i>
            <p>For collaborative, open analysis development</p>
            <i class="fa fa-group fa-2x"></i>
            <p>Use columns to browse Click below to refresh</p>
            {{> refresh}}
        </div>
      </div>
    </div>

    <!-- Browser -->
    <div class="column-9">
      <div class="browser">
        <div class="row">
          <div class="column-3">
            {{> sourcesColumn}}
          </div>
          <div class="column-3">
            {{> projectsColumn}}
          </div>
          <div class="column-3">
            {{> datasetsColumn}}
          </div>
        </div>
      </div>
    </div>

  </div>

  <hr>

  <!-- Lower view -->
  <div class="row">

    <!-- Info labels -->
    <div class="prefix-1 column-2" style="margin-top:10px">
      <div class="fields fields-labels">
        <div class="row">
          <p>Contributors</p>
          <p>Location</p>
          <p>Animal / Data</p>
          <p>Experiment</p>
          <p>Dimensions</p>
          <p>Contents</p>
        </div>
      </div>
    </div>

    
    <div class="column-9" style="margin-top:10px">

      <div class="row">

        <!-- Info content -->
        <div class="column-4">
          <div class="fields">
            {{> datasetInfo}}
          </div>
        </div>

        <!-- Get the data -->
        <div class="column-5">
            <p style="font-size: 150%; margin-top: 7px;">Get the data</p>
            <div style="margin-top: -3px">
              {{> outputMethods}}
            </div>
            <div class="data">
              {{> getData}}
            </div>
        </div>
      </div>
    </div>

  </div>

  
</body>

<template name="sourcesColumn">
  <ul class="listing sources">
  {{#each sources}}
  <li class="directory sources {{selected}}">{{splitSlash name}}</li>
  {{/each}}
  </ul>
</template>

<template name="projectsColumn">
  <ul class="listing projects">
  {{#each projects}}
  <li class="directory projects {{selected}}">{{splitSpace name}}</li>
  {{/each}}
  </ul>
</template>

<template name="datasetsColumn">
  <ul class="listing datasets">
  {{#each datasets}}
  <li class="directory datasets {{selected}}">{{name}}</li>
  {{/each}}
  </ul>
</template>

<template name="datasetInfo">
  {{#if $neq dataset ""}}
    <p>{{commaList contributors}}</p>
    <p>{{location}}</p>
    <p>{{animal}} / {{data}}</p>
    <p>{{experiment}}</p>
    <p>[{{commaList dimensions}}]</p>
    <p>{{commaList contents}}</p>
  {{/if}}
</template>

<template name="outputMethods">
  {{#each methods}}
  <button class="btn btn-output output {{this}} {{selected}}">{{this}}</button>
  {{/each}}
</template>

<template name="getData">
  {{#if $neq download ""}}
    {{#if $eq method "Thunder"}}
        <p>bucket = "s3n://neuro.datasets/"</p>
        <p>path = "{{source}}/{{project}}/{{dataset}}/"</p>
        <p>data = tsc.loadSeries(bucket + path + 'series')</p>
    {{/if}}
    {{#if $eq method "Download"}}
      <p>Direct download coming soon</p>
    {{/if}}
    {{#if $eq method "DBCloud"}}
      <p>Loading in DBCloud coming soon</p>
    {{/if}}
  {{/if}}
</template>

<template name="refresh">
	<button class="btn btn-refresh"><i class="fa fa-refresh fa-2x"></i></button>
</template>

<template name="downloadFromS3">
  <button class="btn"><i class="fa fa-download fa-2x"></i></button>
</template>
